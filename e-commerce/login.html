<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://kit.fontawesome.com/d0da99657e.js" crossorigin="anonymous"></script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE-edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> TechJet</title>
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <div id="cookies">
            <div id="cookie-con" class = "contCK">
                <div class = "subcontainer">
                    <div class = "cookies">
                        <p>Ths website uses cookies to provide a better user experience on our website.
                            <a href=""> More info.</a></p>
                        <button id="cookies-btn">That's fine!</button>
                    </div>
                </div>
            </div>
        </div>

        <section id="header">
            <a href="#"><img src="img/TechJet-Logo.png" class="logo" alt=""></a>

            <div>
                <ul id="navbar">
                    <li><a class="active" href="login.html">LOGIN</a></li>
                    <li><a href="signup.html">SIGN UP</a></li>
                    <!--
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="Repair.html">Repair</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li> -->
                    <!-- <li id="lg-bag"><a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li> -->
                    <a href="#" id="close"><i class="fa-solid fa-xmark"></i></a>
                    <img src="img/moon.png" id="icon">
                </ul>
            </div>
            <div id="mobile">
                <a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
                <i id="bar"class="fas fa-outdent"></i>
            </div>

        </section>

        <section id="form-details" class="center">
            <form id="loginForm">
                <span>LOGIN TO GET STARTED!</span>
                <h2>Welcome to TechJet</h2>
                <input type="text" id="username" name="name" placeholder="Username" required>
                <input type="password" id="password" name="password" placeholder="Password" minlength="8" required>
                <button class="normal" type ="submit">Login</button>
            </form>
            <script>
                const loginForm = document.getElementById("loginForm");

                loginForm.addEventListener("submit", (event) => {
                    event.preventDefault(); // Prevent form from submitting normally

                    const username = document.getElementById("username").value;
                    const password = document.getElementById("password").value;

                    // Send login data to the backend API
                    fetch('/auth/login', { // Use the correct backend endpoint
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            username: username,
                            password: password,
                        }),
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.token) {
                                alert("Login successful!");
                                // You can save the token in localStorage or sessionStorage to persist the login
                                localStorage.setItem("authToken", data.token);
                                window.location.href = "/index.html"; // Redirect to the dashboard or home page
                            } else {
                                alert("Invalid username or password.");
                            }
                        })
                        .catch(error => {
                            console.error("Error:", error);
                            alert("An error occurred during login.");
                        });
                });
            </script>


        </section>

        <footer class="section-p1">
            <div class="col">
                <img class="logo" src="img/TechJet-Logo.png" alt="">
                <h4>Contact</h4>
                <p><strong>Address: </strong> 9HRW+W8M Unnamed Road, San Andres, Corozal, Belize</p>
                <p><strong>Phone: </strong> +501 607-0507</p>
                <p><strong>Hours: </strong>24/7</p>
                <div class="follow">
                    <h4>Follow us</h4>
                    <div class="icon">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-instagram"></i>
                        <i class="fab fa-pinterest-p"></i>
                        <i class="fab fa-youtube"></i>
                    </div>
                </div>
            </div>

            <div class="col">
                <h4>About</h4>
                <a href="#">About us</a>
                <a href="#">Delivery Information</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms & Conditions</a>
                <a href="#">Contact Us</a>
            </div>

            <div class="col">
                <h4>My Account</h4>
                <a href="#">Sign In</a>
                <a href="#">View Cart</a>
                <a href="#">My Wishlist</a>
                <a href="#">Track My Order</a>
                <a href="#">Help</a>
            </div>

            <div class="col install">
                <h4>Install App</h4>
                <p>From App Store or Google Play</p>
                <div class="row">
                    <img src="img/pay/app.jpg" alt="">
                    <img src="img/pay/play.jpg" alt="">

                </div>
                <p>Secure Payment Gateways</p>
                <img src="img/pay/pay.png" alt="">
            </div>

            <div class="copyright">
                <p>Â© 2022, TechJet- Tech Repair and Sale</p>
            </div>
        </footer>
        <script src="script.js"></script>
        <script src="project.js"></script>

    </body>
</html>